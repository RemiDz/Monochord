<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- iOS Specific Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Sound Journey">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#1a1520">
    
    <title>Sound Journey Session Leader</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Philosopher:wght@400;700&family=Quicksand:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- SVG Gradient Definition -->
    <svg width="0" height="0" style="position:absolute">
        <defs>
            <linearGradient id="goldGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#f4d03f"/>
                <stop offset="50%" style="stop-color:#e8b923"/>
                <stop offset="100%" style="stop-color:#d4a012"/>
            </linearGradient>
        </defs>
    </svg>

    <!-- iOS Audio Unlock Screen -->
    <div class="audio-unlock" id="audioUnlock">
        <div class="audio-unlock-icon">üïâÔ∏è</div>
        <div class="audio-unlock-text">Prepare Your Sacred Space</div>
        <button class="audio-unlock-btn" id="audioUnlockBtn" aria-label="Enable audio">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
            </svg>
        </button>
        <div class="audio-unlock-hint">Tap to enable sound</div>
    </div>

    <div class="wake-lock-indicator" id="wakeLockIndicator">‚úß Screen Active</div>

    <div class="container">
        <!-- Compact Header Bar for Tablets - Live Performance Layout -->
        <div class="header-bar" id="headerBar">
            <div class="header-left">
                <h1>Sound Journey</h1>
                <span class="subtitle">Session Leader</span>
            </div>
            <div class="timer-compact">
                <div class="timer-compact-display" id="timerCompactDisplay">0:00</div>
                <div class="timer-compact-label">
                    <span class="timer-compact-mode" id="timerCompactMode">‚àû FREE PLAY</span>
                    <span class="timer-compact-status" id="timerCompactStatus">Ready to begin</span>
                </div>
            </div>
            <div class="header-controls">
                <select class="header-preset-select" id="headerPresetSelect">
                    <option value="free" selected>üéµ Free Play (‚àû)</option>
                    <option value="grounding">üåç Grounding</option>
                    <option value="openHeart">üíö Open Heart</option>
                    <option value="expansive">üåå Expansive</option>
                    <option value="deepRoot">üå≥ Deep Root</option>
                    <option value="celestial">‚≠ê Celestial</option>
                    <option value="sacredFourth">üôè Sacred Fourth</option>
                    <option value="overtone">üåà Overtone</option>
                </select>
                <button class="header-btn header-btn-primary" id="headerStartBtn">‚úß Begin ‚úß</button>
                <button class="header-btn header-btn-stop" id="headerStopBtn" style="display: none;">End</button>
                <button class="header-btn" id="headerResetBtn" style="display: none;">Reset</button>
            </div>
            <div class="header-status">
                <div class="header-audio-dot" id="headerAudioDot"></div>
            </div>
        </div>

        <!-- Legacy Header for Phones -->
        <header>
            <h1>Sound Journey</h1>
            <div class="subtitle">Session Leader</div>
        </header>

        <section class="timer-section">
            <div class="timer-ring-container">
                <svg class="timer-ring" viewBox="0 0 300 300">
                    <circle class="timer-ring-bg" cx="150" cy="150" r="140"></circle>
                    <circle class="timer-ring-progress" cx="150" cy="150" r="140"></circle>
                </svg>
                <div class="breath-circle" id="breathCircle"></div>
                <div class="timer-center">
                    <div class="timer-infinity" id="timerInfinity">‚àû FREE PLAY</div>
                    <div class="timer-display" id="timerDisplay">10:00</div>
                    <div class="free-mode-label" id="freeModeLabel">session time</div>
                    <div class="phase-name" id="phaseName">Ready</div>
                    <div class="phase-guidance" id="phaseGuidance">Set your intention</div>
                </div>
            </div>
        </section>

        <!-- Visual Timeline Section -->
        <section class="timeline-section">
            <div class="timeline-header">
                <span class="timeline-title">‚úß Journey Map ‚úß</span>
                <span class="timeline-duration" id="totalDuration">10:00 total</span>
            </div>
            
            <div class="timeline-track">
                <div class="timeline-progress" id="timelineProgress"></div>
                <div class="timeline-current" id="timelineCurrent" style="left: 0%">
                    <div class="timeline-current-dot"></div>
                </div>
            </div>
            
            <div class="timeline-phases" id="timelinePhases">
                <div class="timeline-phase" data-phase="0">
                    <div class="timeline-phase-name">Settling</div>
                    <div class="timeline-phase-time">0:00</div>
                </div>
                <div class="timeline-phase" data-phase="1">
                    <div class="timeline-phase-name">Deepening</div>
                    <div class="timeline-phase-time">2:00</div>
                </div>
                <div class="timeline-phase" data-phase="2">
                    <div class="timeline-phase-name">Peak</div>
                    <div class="timeline-phase-time">4:00</div>
                </div>
                <div class="timeline-phase" data-phase="3">
                    <div class="timeline-phase-name">Softening</div>
                    <div class="timeline-phase-time">7:00</div>
                </div>
                <div class="timeline-phase" data-phase="4">
                    <div class="timeline-phase-name">Return</div>
                    <div class="timeline-phase-time">9:00</div>
                </div>
            </div>

            <div class="phase-cards" id="phaseCards">
                <div class="phase-card" data-phase="0">
                    <div class="phase-card-icon">üå±</div>
                    <div class="phase-card-name">Settling</div>
                    <div class="phase-card-duration">2:00</div>
                    <div class="phase-card-guidance">Begin softly, invite presence</div>
                </div>
                <div class="phase-card" data-phase="1">
                    <div class="phase-card-icon">üåä</div>
                    <div class="phase-card-name">Deepening</div>
                    <div class="phase-card-duration">2:00</div>
                    <div class="phase-card-guidance">Build resonance gradually</div>
                </div>
                <div class="phase-card" data-phase="2">
                    <div class="phase-card-icon">‚ú®</div>
                    <div class="phase-card-name">Peak</div>
                    <div class="phase-card-duration">3:00</div>
                    <div class="phase-card-guidance">Full expression, hold space</div>
                </div>
                <div class="phase-card" data-phase="3">
                    <div class="phase-card-icon">üçÉ</div>
                    <div class="phase-card-name">Softening</div>
                    <div class="phase-card-duration">2:00</div>
                    <div class="phase-card-guidance">Gently reduce intensity</div>
                </div>
                <div class="phase-card" data-phase="4">
                    <div class="phase-card-icon">üè†</div>
                    <div class="phase-card-name">Return</div>
                    <div class="phase-card-duration">1:00</div>
                    <div class="phase-card-guidance">Ground the journey home</div>
                </div>
            </div>
        </section>

        <!-- Free Mode Interval Panel - Live Performance Optimized -->
        <section class="free-mode-panel" id="freeModePanel">
            <div class="free-mode-header">
                <span class="free-mode-title">‚úß Harmonic Intervals ‚úß</span>
                <div class="channel-selector">
                    <span class="channel-indicator">Assign:</span>
                    <button class="channel-btn active" id="channelLeft" data-channel="left">‚óÄ L</button>
                    <button class="channel-btn" id="channelBoth" data-channel="both">Both</button>
                    <button class="channel-btn" id="channelRight" data-channel="right">R ‚ñ∂</button>
                </div>
            </div>

            <div class="interval-buttons" id="intervalButtons">
                <button class="interval-btn" data-note="D2">
                    <span class="interval-btn-note">D2</span>
                    <span class="interval-btn-freq">72.08 Hz</span>
                </button>
                <button class="interval-btn" data-note="A2">
                    <span class="interval-btn-note">A2</span>
                    <span class="interval-btn-freq">108.00 Hz</span>
                </button>
                <button class="interval-btn active-left" data-note="D3">
                    <span class="interval-btn-note">D3</span>
                    <span class="interval-btn-freq">144.16 Hz</span>
                </button>
                <button class="interval-btn" data-note="E3">
                    <span class="interval-btn-note">E3</span>
                    <span class="interval-btn-freq">162.04 Hz</span>
                </button>
                <button class="interval-btn" data-note="F‚ôØ3">
                    <span class="interval-btn-note">F‚ôØ3</span>
                    <span class="interval-btn-freq">181.63 Hz</span>
                </button>
                <button class="interval-btn" data-note="G3">
                    <span class="interval-btn-note">G3</span>
                    <span class="interval-btn-freq">192.43 Hz</span>
                </button>
                <button class="interval-btn active-right" data-note="A3">
                    <span class="interval-btn-note">A3</span>
                    <span class="interval-btn-freq">216.00 Hz</span>
                </button>
                <button class="interval-btn" data-note="B3">
                    <span class="interval-btn-note">B3</span>
                    <span class="interval-btn-freq">243.07 Hz</span>
                </button>
                <button class="interval-btn" data-note="D4">
                    <span class="interval-btn-note">D4</span>
                    <span class="interval-btn-freq">288.33 Hz</span>
                </button>
                <button class="interval-btn" data-note="A4">
                    <span class="interval-btn-note">A4</span>
                    <span class="interval-btn-freq">432.00 Hz</span>
                </button>
            </div>
            
            <!-- Secondary Controls - Fade Speed (less important) -->
            <div class="free-mode-secondary">
                <div class="fade-speed-control">
                    <span class="fade-speed-label">Fade:</span>
                    <input type="range" id="fadeSpeedSlider" min="0" max="100" value="13">
                    <span class="fade-speed-value" id="fadeSpeedValue">0.7s</span>
                </div>
            </div>
        </section>

        <section class="controls-section">
            <div class="controls-row controls-row-selects" id="selectsRow">
                <div class="select-group" id="durationGroup">
                    <span class="select-label">Duration</span>
                    <select id="durationSelect">
                        <option value="300">5 Minutes</option>
                        <option value="600" selected>10 Minutes</option>
                        <option value="900">15 Minutes</option>
                        <option value="1200">20 Minutes</option>
                        <option value="1800">30 Minutes</option>
                    </select>
                </div>

                <div class="select-group" id="presetGroup">
                    <span class="select-label">Harmonic Preset</span>
                    <select id="presetSelect">
                        <option value="free" selected>üéµ Free Play (‚àû)</option>
                        <option value="grounding">üåç Grounding (D + A)</option>
                        <option value="openHeart">üíö Open Heart (D + F‚ôØ)</option>
                        <option value="expansive">üåå Expansive (A + E)</option>
                        <option value="deepRoot">üå≥ Deep Root (D‚ÇÇ + D‚ÇÉ)</option>
                        <option value="celestial">‚≠ê Celestial (D + B)</option>
                        <option value="sacredFourth">üôè Sacred Fourth (D + G)</option>
                        <option value="overtone">üåà Overtone Journey</option>
                    </select>
                </div>
            </div>

            <div class="controls-row controls-row-buttons" id="buttonsRow">
                <button class="btn btn-primary" id="startBtn">‚úß Begin Journey ‚úß</button>
                <button class="btn btn-stop" id="stopBtn" style="display: none;">End Session</button>
                <button class="btn" id="resetBtn" style="display: none;">Reset</button>
            </div>

            <div class="controls-row toggles-row">
                <div class="toggle-group" title="Use 432 Hz tuning (vs standard 440 Hz)">
                    <span class="toggle-label">432 Hz</span>
                    <div class="toggle active" id="tuningToggle" role="switch" aria-checked="true"></div>
                </div>
                <div class="toggle-group" title="Add subtle micro-detuning for a more natural, alive sound">
                    <span class="toggle-label">Organic</span>
                    <div class="toggle" id="detuneToggle" role="switch" aria-checked="false"></div>
                </div>
            </div>

            <div class="volume-controls">
                <div class="volume-group volume-left">
                    <span class="volume-label">‚óÄ Left</span>
                    <input type="range" id="volumeLeft" min="0" max="100" value="70">
                    <span class="volume-value" id="volumeLeftValue">70%</span>
                </div>
                <div class="volume-group volume-master">
                    <span class="volume-label">Master</span>
                    <input type="range" id="volumeMaster" min="0" max="100" value="80">
                    <span class="volume-value" id="volumeMasterValue">80%</span>
                </div>
                <div class="volume-group volume-right">
                    <span class="volume-label">Right ‚ñ∂</span>
                    <input type="range" id="volumeRight" min="0" max="100" value="70">
                    <span class="volume-value" id="volumeRightValue">70%</span>
                </div>
            </div>

            <div class="freq-display">
                <div class="freq-channel">
                    <div class="freq-channel-label">Left Channel</div>
                    <div class="freq-channel-value" id="freqLeftValue">144.16 Hz</div>
                    <div class="freq-channel-note" id="freqLeftNote">D3</div>
                </div>
                <div class="freq-channel freq-channel-beat">
                    <div class="freq-channel-label">Binaural Beat</div>
                    <div class="freq-channel-value" id="binauralBeatValue">71.84 Hz</div>
                    <div class="freq-channel-note" id="binauralBeatNote">Deep Theta</div>
                </div>
                <div class="freq-channel">
                    <div class="freq-channel-label">Right Channel</div>
                    <div class="freq-channel-value" id="freqRightValue">216.00 Hz</div>
                    <div class="freq-channel-note" id="freqRightNote">A3</div>
                </div>
            </div>

            <div class="audio-status">
                <div class="audio-dot" id="audioDot"></div>
                <span id="audioStatusText">Tap to enable sound</span>
            </div>
        </section>

        <!-- Live Performance Effects Panel -->
        <section class="effects-section" id="effectsSection">
            <div class="effects-header">
                <span class="effects-title">‚úß Live Effects ‚úß</span>
                <span class="effects-subtitle">Enhance your sound journey</span>
            </div>

            <div class="effects-grid">
                <!-- Pulse/Heartbeat Effect -->
                <div class="effect-card" id="pulseEffectCard">
                    <div class="effect-icon">üíì</div>
                    <div class="effect-name">Pulse</div>
                    <div class="effect-desc">Gentle heartbeat rhythm</div>
                    <div class="effect-controls">
                        <button class="effect-btn" id="pulseToggle">Off</button>
                        <div class="effect-slider-group">
                            <span class="effect-slider-label">BPM</span>
                            <input type="range" class="effect-slider" id="pulseRateSlider" min="40" max="80" value="60">
                            <span class="effect-slider-value" id="pulseRateValue">60</span>
                        </div>
                    </div>
                    <div class="pulse-visualizer" id="pulseVisualizer"></div>
                </div>

                <!-- Pan Drift Effect -->
                <div class="effect-card" id="panDriftCard">
                    <div class="effect-icon">üåä</div>
                    <div class="effect-name">Pan Drift</div>
                    <div class="effect-desc">Sound waves between ears</div>
                    <div class="effect-controls">
                        <button class="effect-btn" id="panDriftToggle">Off</button>
                        <div class="effect-slider-group">
                            <span class="effect-slider-label">Speed</span>
                            <input type="range" class="effect-slider" id="panDriftSpeedSlider" min="1" max="20" value="8">
                            <span class="effect-slider-value" id="panDriftSpeedValue">8s</span>
                        </div>
                    </div>
                    <div class="pan-visualizer" id="panVisualizer">
                        <div class="pan-dot" id="panDot"></div>
                    </div>
                </div>

                <!-- Breath Pacer -->
                <div class="effect-card" id="breathPacerCard">
                    <div class="effect-icon">üå¨Ô∏è</div>
                    <div class="effect-name">Breath Guide</div>
                    <div class="effect-desc">Visual breathing pacer</div>
                    <div class="effect-controls">
                        <button class="effect-btn" id="breathToggle">Off</button>
                        <div class="effect-slider-group">
                            <span class="effect-slider-label">Cycle</span>
                            <input type="range" class="effect-slider" id="breathCycleSlider" min="4" max="12" value="8">
                            <span class="effect-slider-value" id="breathCycleValue">8s</span>
                        </div>
                    </div>
                    <div class="breath-visualizer" id="breathVisualizer">
                        <div class="breath-ring" id="breathRing"></div>
                        <div class="breath-text" id="breathText">Inhale</div>
                    </div>
                </div>

                <!-- Volume Swell -->
                <div class="effect-card" id="swellCard">
                    <div class="effect-icon">üéöÔ∏è</div>
                    <div class="effect-name">Volume Swell</div>
                    <div class="effect-desc">Gradual intensity waves</div>
                    <div class="effect-controls">
                        <button class="effect-btn" id="swellToggle">Off</button>
                        <div class="effect-slider-group">
                            <span class="effect-slider-label">Period</span>
                            <input type="range" class="effect-slider" id="swellPeriodSlider" min="10" max="60" value="30">
                            <span class="effect-slider-value" id="swellPeriodValue">30s</span>
                        </div>
                    </div>
                    <div class="swell-visualizer" id="swellVisualizer">
                        <div class="swell-bar" id="swellBar"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Instrument Tuner Section -->
        <section class="tuner-section" id="tunerSection">
            <div class="tuner-header" id="tunerHeader">
                <div class="tuner-header-left">
                    <span class="tuner-title">üéµ Instrument Tuner</span>
                    <span class="tuner-subtitle">Tune your KOTAMO monochord</span>
                </div>
                <span class="tuner-collapse-icon">‚ñº</span>
            </div>

            <div class="tuner-content" id="tunerContent">
                <!-- Reference Pitch & Root Note Controls -->
                <div class="tuner-controls-row">
                    <div class="tuner-select-group">
                        <span class="tuner-select-label">Reference Pitch</span>
                        <div class="tuner-pitch-toggle" id="tunerPitchToggle">
                            <button class="tuner-pitch-btn active" data-pitch="432">432 Hz</button>
                            <button class="tuner-pitch-btn" data-pitch="440">440 Hz</button>
                        </div>
                    </div>

                    <div class="tuner-select-group">
                        <span class="tuner-select-label">Root Note</span>
                        <select class="tuner-select" id="tunerRootSelect">
                            <option value="C">C</option>
                            <option value="C#">C‚ôØ</option>
                            <option value="D" selected>D</option>
                            <option value="D#">D‚ôØ</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="F#">F‚ôØ</option>
                            <option value="G">G</option>
                            <option value="G#">G‚ôØ</option>
                            <option value="A">A</option>
                            <option value="A#">A‚ôØ</option>
                            <option value="B">B</option>
                        </select>
                    </div>
                </div>

                <!-- Instrument Selector Tabs -->
                <div class="tuner-instrument-tabs" id="tunerInstrumentTabs">
                    <button class="tuner-instrument-tab active" data-instrument="monochord">
                        <span class="tuner-instrument-icon">üé∏</span>
                        <span>Monochord</span>
                    </button>
                    <button class="tuner-instrument-tab" data-instrument="tampura">
                        <span class="tuner-instrument-icon">ü™ï</span>
                        <span>Tampura</span>
                    </button>
                    <button class="tuner-instrument-tab" data-instrument="koto">
                        <span class="tuner-instrument-icon">üé∂</span>
                        <span>Koto</span>
                    </button>
                </div>

                <!-- String Tuning Buttons Container -->
                <div class="tuner-strings-container" id="tunerStringsContainer">
                    <!-- Monochord Layout (Default) -->
                    <div class="tuner-monochord-layout" id="tunerMonochord">
                        <button class="tuner-string-btn bass-left" data-note="-7" data-octave="2">
                            <span class="tuner-string-note">D2</span>
                            <span class="tuner-string-freq">72.08 Hz</span>
                            <span class="tuner-string-count">5 strings</span>
                        </button>
                        <div class="tuner-string-divider"></div>
                        <button class="tuner-string-btn middle" data-note="-7" data-octave="3">
                            <span class="tuner-string-note">D3</span>
                            <span class="tuner-string-freq">144.16 Hz</span>
                            <span class="tuner-string-count">20 strings</span>
                        </button>
                        <div class="tuner-string-divider"></div>
                        <button class="tuner-string-btn bass-right" data-note="-7" data-octave="2">
                            <span class="tuner-string-note">D2</span>
                            <span class="tuner-string-freq">72.08 Hz</span>
                            <span class="tuner-string-count">5 strings</span>
                        </button>
                    </div>

                    <!-- Tampura Layout (Hidden by default) -->
                    <div class="tuner-tampura-layout" id="tunerTampura" style="display: none;">
                        <button class="tuner-string-btn tampura a-string" data-note="0" data-octave="2">
                            <span class="tuner-string-note">A2</span>
                            <span class="tuner-string-freq">108.00 Hz</span>
                            <span class="tuner-string-count">String 1 (Pa)</span>
                        </button>
                        <button class="tuner-string-btn tampura" data-note="-7" data-octave="3">
                            <span class="tuner-string-note">D3</span>
                            <span class="tuner-string-freq">144.16 Hz</span>
                            <span class="tuner-string-count">String 2 (Sa)</span>
                        </button>
                        <button class="tuner-string-btn tampura" data-note="-7" data-octave="3">
                            <span class="tuner-string-note">D3</span>
                            <span class="tuner-string-freq">144.16 Hz</span>
                            <span class="tuner-string-count">String 3 (Sa)</span>
                        </button>
                        <button class="tuner-string-btn tampura" data-note="-7" data-octave="2">
                            <span class="tuner-string-note">D2</span>
                            <span class="tuner-string-freq">72.08 Hz</span>
                            <span class="tuner-string-count">String 4 (Sa)</span>
                        </button>
                    </div>

                    <!-- Koto Layout (Hidden by default) -->
                    <div class="tuner-koto-layout" id="tunerKoto" style="display: none;">
                        <!-- First: Tune all strings to D3 -->
                        <div class="tuner-koto-phase" id="kotoPhase1">
                            <div class="tuner-koto-phase-label">Step 1: Tune all strings to D3</div>
                            <button class="tuner-string-btn koto-base" data-note="-7" data-octave="3">
                                <span class="tuner-string-note">D3</span>
                                <span class="tuner-string-freq">144.16 Hz</span>
                                <span class="tuner-string-count">All 12 strings</span>
                            </button>
                        </div>
                        <!-- Second: Individual string tuning with bridges -->
                        <div class="tuner-koto-phase" id="kotoPhase2">
                            <div class="tuner-koto-phase-label">Step 2: Place bridges & tune each string</div>
                            <div class="tuner-koto-strings">
                                <button class="tuner-string-btn koto-string" data-note="2" data-octave="3" data-string="1">
                                    <span class="tuner-string-num">1</span>
                                    <span class="tuner-string-note">B3</span>
                                    <span class="tuner-string-freq">243.07 Hz</span>
                                </button>
                                <button class="tuner-string-btn koto-string" data-note="4" data-octave="3" data-string="2">
                                    <span class="tuner-string-num">2</span>
                                    <span class="tuner-string-note">C#4</span>
                                    <span class="tuner-string-freq">272.87 Hz</span>
                                </button>
                                <button class="tuner-string-btn koto-string" data-note="-7" data-octave="4" data-string="3">
                                    <span class="tuner-string-num">3</span>
                                    <span class="tuner-string-note">D4</span>
                                    <span class="tuner-string-freq">288.33 Hz</span>
                                </button>
                                <button class="tuner-string-btn koto-string" data-note="-5" data-octave="4" data-string="4">
                                    <span class="tuner-string-num">4</span>
                                    <span class="tuner-string-note">E4</span>
                                    <span class="tuner-string-freq">324.08 Hz</span>
                                </button>
                                <button class="tuner-string-btn koto-string" data-note="-3" data-octave="4" data-string="5">
                                    <span class="tuner-string-num">5</span>
                                    <span class="tuner-string-note">F#4</span>
                                    <span class="tuner-string-freq">363.27 Hz</span>
                                </button>
                                <button class="tuner-string-btn koto-string" data-note="-2" data-octave="4" data-string="6">
                                    <span class="tuner-string-num">6</span>
                                    <span class="tuner-string-note">G4</span>
                                    <span class="tuner-string-freq">384.87 Hz</span>
                                </button>
                                <button class="tuner-string-btn koto-string" data-note="0" data-octave="4" data-string="7">
                                    <span class="tuner-string-num">7</span>
                                    <span class="tuner-string-note">A4</span>
                                    <span class="tuner-string-freq">432.00 Hz</span>
                                </button>
                                <button class="tuner-string-btn koto-string" data-note="2" data-octave="4" data-string="8">
                                    <span class="tuner-string-num">8</span>
                                    <span class="tuner-string-note">B4</span>
                                    <span class="tuner-string-freq">486.14 Hz</span>
                                </button>
                                <button class="tuner-string-btn koto-string" data-note="4" data-octave="4" data-string="9">
                                    <span class="tuner-string-num">9</span>
                                    <span class="tuner-string-note">C#5</span>
                                    <span class="tuner-string-freq">545.75 Hz</span>
                                </button>
                                <button class="tuner-string-btn koto-string" data-note="-7" data-octave="5" data-string="10">
                                    <span class="tuner-string-num">10</span>
                                    <span class="tuner-string-note">D5</span>
                                    <span class="tuner-string-freq">576.65 Hz</span>
                                </button>
                                <button class="tuner-string-btn koto-string" data-note="-5" data-octave="5" data-string="11">
                                    <span class="tuner-string-num">11</span>
                                    <span class="tuner-string-note">E5</span>
                                    <span class="tuner-string-freq">648.16 Hz</span>
                                </button>
                                <button class="tuner-string-btn koto-string" data-note="-3" data-octave="5" data-string="12">
                                    <span class="tuner-string-num">12</span>
                                    <span class="tuner-string-note">F#5</span>
                                    <span class="tuner-string-freq">726.53 Hz</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Visual Pitch Detector / Tuner Meter -->
                <div class="tuner-meter-section" id="tunerMeterSection">
                    <div class="tuner-meter-header">
                        <span class="tuner-meter-title">üé§ Pitch Detector</span>
                        <button class="tuner-mic-btn" id="tunerMicBtn" title="Enable microphone">
                            <span id="tunerMicIcon">üéôÔ∏è</span>
                            <span id="tunerMicText">Listen</span>
                        </button>
                    </div>
                    <div class="tuner-meter-container" id="tunerMeterContainer">
                        <!-- Meter scale -->
                        <div class="tuner-meter-scale">
                            <span class="tuner-meter-label flat">‚ô≠ FLAT</span>
                            <span class="tuner-meter-label center">IN TUNE</span>
                            <span class="tuner-meter-label sharp">SHARP ‚ôØ</span>
                        </div>
                        <!-- Meter track with zones -->
                        <div class="tuner-meter-track">
                            <div class="tuner-meter-zone flat-zone"></div>
                            <div class="tuner-meter-zone tune-zone"></div>
                            <div class="tuner-meter-zone sharp-zone"></div>
                            <!-- Center marker -->
                            <div class="tuner-meter-center"></div>
                            <!-- Needle indicator -->
                            <div class="tuner-meter-needle" id="tunerMeterNeedle"></div>
                        </div>
                        <!-- Cents display -->
                        <div class="tuner-meter-cents" id="tunerMeterCents">0 cents</div>
                        <!-- Detected note display -->
                        <div class="tuner-meter-detected">
                            <span class="tuner-detected-note" id="tunerDetectedNote">‚Äî</span>
                            <span class="tuner-detected-freq" id="tunerDetectedFreq">‚Äî Hz</span>
                        </div>
                        <!-- Target note (when a string button is selected) -->
                        <div class="tuner-meter-target" id="tunerMeterTarget">
                            <span class="tuner-target-label">Target:</span>
                            <span class="tuner-target-note" id="tunerTargetNote">‚Äî</span>
                            <span class="tuner-target-freq" id="tunerTargetFreq">‚Äî</span>
                        </div>
                    </div>
                </div>

                <!-- Frequency Display -->
                <div class="tuner-freq-display" id="tunerFreqDisplay">
                    <div class="tuner-playing-indicator" id="tunerPlayingIndicator"></div>
                    <span class="tuner-freq-value" id="tunerFreqValue">‚Äî</span>
                    <span class="tuner-freq-label">Hz</span>
                </div>

                <!-- Bonus Features -->
                <div class="tuner-bonus-row">
                    <button class="tuner-bonus-btn" id="tunerDroneBtn" title="Hold a note indefinitely">
                        <span>üîä</span>
                        <span>Drone</span>
                    </button>
                    <button class="tuner-bonus-btn" id="tunerSweepBtn" title="Cycle through all strings">
                        <span>üîÑ</span>
                        <span>Sweep</span>
                    </button>
                    <button class="tuner-bonus-btn" id="tunerOctaveBtn" title="Play D2+D3 together">
                        <span>üéº</span>
                        <span>Octave Check</span>
                    </button>
                    <button class="tuner-bonus-btn" id="tunerFifthBtn" title="Play D+A together">
                        <span>üéµ</span>
                        <span>Fifth Check</span>
                    </button>
                </div>
            </div>
        </section>
    </div>

    <div class="completion-overlay" id="completionOverlay">
        <div class="completion-icon">üôè</div>
        <div class="completion-message">Journey Complete</div>
        <div class="completion-sub">Rest in the stillness</div>
        <button class="btn" id="closeCompletionBtn">Namaste</button>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
